(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{181:function(t,e,o){var content=o(197);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(52).default)("01b66ec8",content,!0,{sourceMap:!1})},196:function(t,e,o){"use strict";var r=o(181);o.n(r).a},197:function(t,e,o){(t.exports=o(51)(!1)).push([t.i,'*[data-v-a5e8c102]{box-sizing:border-box}body[data-v-a5e8c102]{margin:0;padding:0}header[data-v-a5e8c102]{background:#2b303b;height:50px;width:100%;display:-webkit-box;display:flex;color:#fff}.flash-logo[data-v-a5e8c102]{height:60px;border-radius:8px;float:left;margin-right:15px}section[data-v-a5e8c102]{padding:15px;width:calc(100% - 45px)}.logo img[data-v-a5e8c102]{height:50px;padding:6px;margin-left:20px}.flash-comments[data-v-a5e8c102]{border:1px solid #aeaeae;border-radius:10px;width:70%;overflow:hidden}.post[data-v-a5e8c102]{padding-top:10px}.flash-comments .header[data-v-a5e8c102]{display:-webkit-box;display:flex;padding:5px 20px;border-bottom:1px solid #eaeaea}.flash-comments .header .text[data-v-a5e8c102]{padding-left:15px;line-height:25px}.flash-comments .comment[data-v-a5e8c102]{border-bottom:1px solid #eaeaea;padding:4px}.flash-comments form[data-v-a5e8c102]{margin-bottom:0}.flash-comments .comment-form[data-v-a5e8c102]{display:-webkit-box;display:flex;padding:6px;border-bottom:1px solid #eaeaea}.comment-form .left-side[data-v-a5e8c102]{-webkit-box-flex:5;flex:5;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-right:5px}.comment-form .left-side .row[data-v-a5e8c102]{-webkit-box-flex:0;flex:0 auto;display:-webkit-box;display:flex;align-content:center}.comment-form .left-side .row input[data-v-a5e8c102]{height:32px;width:50%}.comment-form .left-side .row textarea[data-v-a5e8c102]{height:60px;margin-top:8px}.comment-form .right-side[data-v-a5e8c102]{-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.comment-form .right-side button[data-v-a5e8c102]{white-space:pre-wrap}.comment-form textarea[data-v-a5e8c102]{margin-left:10%;width:80%}.button-secondary[data-v-a5e8c102]{background:#42b8dd;color:#fff;border-radius:4px;text-shadow:0 1px 1px rgba(0,0,0,.2)}.flash-comments .user-icon[data-v-a5e8c102]{-webkit-box-flex:0;flex:0 80px;display:-webkit-box;display:flex;-webkit-box-pack:left;justify-content:left;margin:10px}.flash-comments .user-icon img[data-v-a5e8c102]{height:45px}.flash-comments .comment-info[data-v-a5e8c102]{-webkit-box-flex:5;flex:5}.flash-comments .comment-info .line[data-v-a5e8c102]{display:-webkit-box;display:flex}.flash-comments .comment-info .name[data-v-a5e8c102]{margin-top:20px;margin-left:-30px;color:#000;font-weight:700}.flash-comments .comment-info .email[data-v-a5e8c102]{color:#aeaeae;margin-left:10px}.flash-comments .comment-info .text[data-v-a5e8c102]{margin-left:55px;padding:10px;font-size:16px}.flash-comments .comment[data-v-a5e8c102]{animation:animationFrames-data-v-a5e8c102 1s ease;animation-iteration-count:1;transform-origin:50% 50%;animation-fill-mode:forwards;-webkit-animation:animationFrames-data-v-a5e8c102 1s ease;-webkit-animation-iteration-count:1;-webkit-transform-origin:50% 50%;-webkit-animation-fill-mode:forwards;-moz-animation:animationFrames-data-v-a5e8c102 ease 1s;-moz-animation-iteration-count:1;-moz-transform-origin:50% 50%;-moz-animation-fill-mode:forwards;-o-animation:animationFrames-data-v-a5e8c102 ease 1s;-o-animation-iteration-count:1;-o-transform-origin:50% 50%;-o-animation-fill-mode:forwards;-ms-animation:animationFrames-data-v-a5e8c102 ease 1s;-ms-animation-iteration-count:1;-ms-transform-origin:50% 50%;-ms-animation-fill-mode:forwards}@keyframes animationFrames-data-v-a5e8c102{0%{opacity:0;-webkit-transform:translate(-1500px);transform:translate(-1500px)}60%{opacity:1;-webkit-transform:translate(30px);transform:translate(30px)}80%{-webkit-transform:translate(-10px);transform:translate(-10px)}to{opacity:1;-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes animationFrames-data-v-a5e8c102{0%{opacity:0;-webkit-transform:translate(-1500px)}60%{opacity:1;-webkit-transform:translate(30px)}80%{-webkit-transform:translate(-10px)}to{opacity:1;-webkit-transform:translate(0)}}.leftcolumn[data-v-a5e8c102]{float:left;width:75%}.rightcolumn[data-v-a5e8c102]{float:left;width:25%;padding-left:20px}.fakeimg[data-v-a5e8c102]{background-color:#aaa;width:100%;padding:20px}.itemCard[data-v-a5e8c102]{background-color:#fff;padding:25px;margin-top:20px}.row[data-v-a5e8c102]:after{content:"";display:table;clear:both}@media screen and (max-width:1000px){.leftcolumn[data-v-a5e8c102],.rightcolumn[data-v-a5e8c102]{width:100%;padding:0}.flash-comments[data-v-a5e8c102]{border:1px solid #aeaeae;border-radius:10px;width:80%;overflow:hidden}}@media screen and (max-width:500px){.flash-comments[data-v-a5e8c102]{border:1px solid #aeaeae;border-radius:10px;width:100%;overflow:hidden}}.uploadFileInput[data-v-a5e8c102]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}',""])},209:function(t,e,o){"use strict";o.r(e);o(74),o(36),o(26),o(56);var r=o(47),n=(o(15),o(55),o(73)),l=o.n(n),c=o(72);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var m={head:{meta:[],link:[{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Raleway:200"},{rel:"stylesheet",href:"https://unpkg.com/purecss@0.6.2/build/pure-min.css",integrity:"sha384-UQiGfs9ICog+LwheBSRCt1o5cbyKIHbwjWscjemyBMT9YCUMZffs6UqUTd0hObXD",crossorigin:"anonymous"}],script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"}]},data:function(){return{cbctDownloadProgress:0,stlDownloadProgress:0,imageDownloadProgress:0,itemId:this.$route.params.showItem,profileImg:"",postImg:"",post:{},publisher:{},relativePosts:[],comment:"",comments:[],loadingPost:!1,uploadDialog:!1,saveUpdate:!1,postTitleUpdate:"",postDescriptionUpdate:"",file:"",editedIndex:-1,editedItem:{},editCommentDialog:!1,currentWorkflow:"TODO"}},computed:{role:function(){return this.$store.getters.role}},methods:{goToAnotherPost:function(t){this.$router.replace("/uploadedItems/"+t)},downloadFiles:function(){var t="https://s3.eu-central-1.amazonaws.com/q-communicator/"+this.publisher.id+"/items/"+this.post.id+"/cbct/cbctFile.cbct",e="https://s3.eu-central-1.amazonaws.com/q-communicator/"+this.publisher.id+"/items/"+this.post.id+"/stl/stlFile.stl",o=this;0===o.cbctDownloadProgress&&l()({url:t,method:"GET",responseType:"blob",onDownloadProgress:function(progress){o.cbctDownloadProgress=Math.ceil(progress.loaded/progress.total*100)}}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download","cbctFile.rar"),document.body.appendChild(o),o.click()})).finally((function(){o.cbctDownloadProgress=0})),0===o.stlDownloadProgress&&l()({url:e,method:"GET",responseType:"blob",onDownloadProgress:function(progress){o.stlDownloadProgress=Math.ceil(progress.loaded/progress.total*100)}}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download","stlFile.stl"),document.body.appendChild(o),o.click()})).finally((function(){o.stlDownloadProgress=0}))},addComment:function(){var t=this,e=this.comment;if(this.comment="",""!==e){var o=this.$store.getters.userId;c.a.post("comments/",{item_id:this.itemId,text:e}).then((function(e){console.log(e.data);var r=e.data;r.created||(r.created=(new Date).toISOString()),r.src="https://s3.eu-central-1.amazonaws.com/q-communicator/"+o+"/avatar/picture.jpg",t.comments.push(r),setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),100)})).catch((function(){t.comment=e,alert("Failed to add the comment please try again later")}))}},deletePost:function(){var t=this;confirm("Are you sure you want to delete this post?")&&(console.log("Delete post"),c.a.delete("items/"+this.itemId).then((function(){t.$router.replace("/uploadedItems")})).catch((function(){alert("Failed to delete the post please try again later")})))},updatePost:function(){var t=this;if(this.postTitleUpdate&&this.postDescriptionUpdate){this.saveUpdate=!0;var e=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.post);e.title=this.postTitleUpdate,e.description=this.postDescriptionUpdate;var o="items/";"SURGICAL_PLANNING"===this.post.type?o+="surg_plan/":"DESIGNING"===this.post.type||"PRODUCTION"===this.post.type||"MILLING"===this.post.type?o+="des_prod_mil/":o+="student/",c.a.put(o+this.itemId,e).then((function(){t.post.title=t.postTitleUpdate,t.post.description=t.postDescriptionUpdate,t.uploadDialog=!1})).catch((function(){t.postTitleUpdate=t.post.title,t.postDescriptionUpdate=t.post.description,alert("Failed to update the post please try again later")})).finally((function(){t.saveUpdate=!1}))}else alert("Please fill all the fields")},uploadClicked:function(){$("#file-input").trigger("click")},changeWorkflow:function(){c.a.put("").then((function(t){}))}},created:function(){var t=this,e=localStorage.getItem("token");c.a.defaults.headers.common.Authorization="Bearer "+e,this.loadingPost=!0,c.a.get("items/"+this.itemId).then((function(e){t.post=e.data.item,t.post.created||(t.post.created=(new Date).toISOString()),t.postTitleUpdate=t.post.title,t.postDescriptionUpdate=t.post.description,t.publisher=e.data.user,t.postImg="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.publisher.id+"/items/"+t.post.id+"/picture/picture.jpg",t.comments=e.data.comments.map((function(t){return t.created||(t.created=(new Date).toISOString()),t.src="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.user.id+"/avatar/picture.jpg",t})),t.profileImg="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.publisher.id+"/avatar/picture.jpg",t.relativePosts=e.data.relative_items})).catch((function(t){})).finally((function(){t.loadingPost=!1}))}},f=(o(196),o(12)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.uploadDialog=!1}}},[o("v-icon",[t._v("close")])],1),t._v(" "),o("v-toolbar-title",[t._v("Update Post")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-toolbar-items",[o("v-btn",{attrs:{dark:"",flat:"",disabled:t.saveUpdate},on:{click:t.updatePost}},[t._v("Save")])],1)],1),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("h3",[t._v("Post Header")]),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-text-field",{attrs:{label:"Post Title"},model:{value:t.postTitleUpdate,callback:function(e){t.postTitleUpdate=e},expression:"postTitleUpdate"}})],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("h3",[t._v("Post Content")]),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:""}},[o("v-textarea",{attrs:{label:"Post Description"},model:{value:t.postDescriptionUpdate,callback:function(e){t.postDescriptionUpdate=e},expression:"postDescriptionUpdate"}})],1)],1),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}})],1)],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editCommentDialog,callback:function(e){t.editCommentDialog=e},expression:"editCommentDialog"}}),t._v(" "),t.post.title?o("body",[o("div",{staticClass:"row"},[o("div",{staticClass:"leftcolumn"},[o("div",{staticClass:"itemCard"},[o("section",["ADMIN"===t.role||"TECHNICIAN"===t.role?o("v-btn",{attrs:{dark:"",color:"#1976D2"},on:{click:function(e){t.uploadDialog=!0}}},[t._v("Update post")]):t._e(),t._v(" "),"ADMIN"===t.role?o("v-btn",{attrs:{color:"error"},on:{click:t.deletePost}},[t._v("Delete post")]):t._e(),t._v(" "),o("div",{staticClass:"input-group mb-3"},[t._m(0),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.currentWorkflow,expression:"currentWorkflow"}],staticClass:"custom-select",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentWorkflow=e.target.multiple?o:o[0]},t.changeWorkflow]}},[o("option",{attrs:{selected:"",value:"TODO"}},[t._v("Todo")]),t._v(" "),o("option",{attrs:{value:"INPROGRESS"}},[t._v("In progress")]),t._v(" "),o("option",{attrs:{value:"DELIVERED"}},[t._v("Delivered")])])]),t._v(" "),o("div",{staticClass:"post"},[o("h2",[t._v(t._s(t.post.title))]),t._v(" "),o("h5",[t._v(t._s(t.post.created.split("T")[0])+" "+t._s(t.post.created.split("T")[1]))]),t._v(" "),""!==t.postImg&&"none"!==t.postImg?o("img",{staticClass:"fakeimg",staticStyle:{width:"300px",padding:"0"},attrs:{src:t.postImg},on:{error:function(e){t.postImg="none"}}}):t._e(),t._v(" "),"none"===t.postImg?o("div",{staticClass:"fakeimg",staticStyle:{height:"200px"}},[t._v("This post has no image, click on the button below to download content files")]):t._e(),t._v(" "),o("h6",[t._v(t._s(t.post.description))])]),t._v(" "),t.cbctDownloadProgress||t.stlDownloadProgress?t._e():o("v-btn",{attrs:{color:"primary"},on:{click:t.downloadFiles}},[t._v("Download Files")]),t._v(" "),t.cbctDownloadProgress?o("v-progress-circular",{attrs:{rotate:360,size:130,width:15,value:t.cbctDownloadProgress,color:"teal"}},[t._v("CBCT: "+t._s(t.cbctDownloadProgress)+"%")]):t._e(),t._v(" "),t.stlDownloadProgress?o("v-progress-circular",{attrs:{rotate:360,size:130,width:15,value:t.stlDownloadProgress,color:"primary"}},[t._v("STL: "+t._s(t.stlDownloadProgress)+"%")]):t._e()],1),t._v(" "),o("section",[o("div",{staticClass:"flash-comments"},[t._m(1),t._v(" "),o("form",{staticClass:"pure-form",attrs:{id:"comment-form"},on:{submit:function(e){return e.preventDefault(),t.addComment(e)}}},[o("div",{staticClass:"comment-form"},[o("div",{staticClass:"left-side"},[o("div",{staticClass:"row"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"Enter comment text",required:"",id:"new_comment_text",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"right-side"},[o("button",{staticClass:"button-secondary pure-button",attrs:{type:"submit",disabled:!t.comment}},[t._v("Add Comment")])])])]),t._v(" "),o("div",{staticClass:"comments-list",attrs:{id:"comments-list"}},t._l(t.comments,(function(e,i){return o("div",{key:i,staticClass:"comment-info comment"},[o("div",{staticClass:"line"},[o("div",{staticClass:"user-icon"},[o("img",{attrs:{src:e.src},on:{error:function(t){e.src="https://s3.eu-central-1.amazonaws.com/q-communicator/default_images/avatar.svg"}}})]),t._v(" "),o("div",{staticClass:"name"},[t._v(t._s(e.user.first_name)+" "+t._s(e.user.last_name))]),t._v(" "),o("v-spacer"),t._v(" "),o("span",{staticClass:"caption grey--text",staticStyle:{"text-align":"right"}},[t._v(t._s(e.created.split("T")[0])+" "+t._s(e.created.split("T")[1]))])],1),t._v(" "),o("div",{staticClass:"line"},[o("div",{staticClass:"text"},[t._v(t._s(e.text))])])])})),0)])])])]),t._v(" "),o("div",{staticClass:"rightcolumn"},[o("div",{staticClass:"itemCard"},[o("h2",[t._v("About The Publisher")]),t._v(" "),o("img",{staticClass:"fakeimg",staticStyle:{height:"200px",padding:"0"},attrs:{src:t.profileImg},on:{error:function(e){t.profileImg="https://s3.eu-central-1.amazonaws.com/q-communicator/default_images/avatar.svg"}}}),t._v(" "),o("h6",[o("b",[t._v("Name:")]),t._v("\n            "+t._s(t.publisher.first_name)+" "+t._s(t.publisher.last_name)+"\n          ")]),t._v(" "),o("h6",[o("b",[t._v("Email:")]),t._v("\n            "+t._s(t.publisher.email)+"\n          ")]),t._v(" "),o("h6",[o("b",[t._v("Profession:")]),t._v("\n            "+t._s(t.publisher.profession)+"\n          ")])]),t._v(" "),o("div",{staticClass:"itemCard"},[o("h3",[t._v("Relative Posts")]),t._v(" "),t._l(t.relativePosts,(function(e){return o("div",{key:e.id},[o("div",{staticClass:"fakeimg",staticStyle:{cursor:"pointer"},on:{click:function(o){return t.goToAnotherPost(e.id)}}},[t._v(t._s(e.title))]),t._v(" "),o("br")])}))],2)])])]):t._e(),t._v(" "),t.loadingPost?o("v-container",[o("v-text-field",{attrs:{color:"primary",loading:"",disabled:""}})],1):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("label",{staticClass:"input-group-text"},[this._v("Workflow")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",[e("img",{attrs:{src:"https://cdn1.iconfinder.com/data/icons/basic-ui-elements-coloricon/21/43-512.png",width:"40",height:"40"}})]),this._v(" "),e("div",{staticClass:"text"},[this._v("Comments")])])}],!1,null,"a5e8c102",null);e.default=component.exports}}]);