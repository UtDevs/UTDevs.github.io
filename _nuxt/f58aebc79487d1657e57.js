(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{193:function(t,e,o){var content=o(215);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(20).default)("7049f358",content,!0,{sourceMap:!1})},214:function(t,e,o){"use strict";var r=o(193);o.n(r).a},215:function(t,e,o){(t.exports=o(19)(!1)).push([t.i,'*[data-v-101b3fee]{box-sizing:border-box}body[data-v-101b3fee]{margin:0;padding:0}header[data-v-101b3fee]{background:#2b303b;height:50px;width:100%;display:-webkit-box;display:flex;color:#fff}.flash-logo[data-v-101b3fee]{height:60px;border-radius:8px;float:left;margin-right:15px}section[data-v-101b3fee]{padding:15px;width:calc(100% - 45px)}.logo img[data-v-101b3fee]{height:50px;padding:6px;margin-left:20px}.flash-comments[data-v-101b3fee]{border:1px solid #aeaeae;border-radius:10px;width:70%;overflow:hidden}.post[data-v-101b3fee]{padding-top:10px}.flash-comments .header[data-v-101b3fee]{display:-webkit-box;display:flex;padding:5px 20px;border-bottom:1px solid #eaeaea}.flash-comments .header .text[data-v-101b3fee]{padding-left:15px;line-height:25px}.flash-comments .comment[data-v-101b3fee]{border-bottom:1px solid #eaeaea;padding:4px}.flash-comments form[data-v-101b3fee]{margin-bottom:0}.flash-comments .comment-form[data-v-101b3fee]{display:-webkit-box;display:flex;padding:6px;border-bottom:1px solid #eaeaea}.comment-form .left-side[data-v-101b3fee]{-webkit-box-flex:5;flex:5;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-right:5px}.comment-form .left-side .row[data-v-101b3fee]{-webkit-box-flex:0;flex:0 auto;display:-webkit-box;display:flex;align-content:center}.comment-form .left-side .row input[data-v-101b3fee]{height:32px;width:50%}.comment-form .left-side .row textarea[data-v-101b3fee]{height:60px;margin-top:8px}.comment-form .right-side[data-v-101b3fee]{-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.comment-form .right-side button[data-v-101b3fee]{white-space:pre-wrap}.comment-form textarea[data-v-101b3fee]{margin-left:10%;width:80%}.button-secondary[data-v-101b3fee]{background:#42b8dd;color:#fff;border-radius:4px;text-shadow:0 1px 1px rgba(0,0,0,.2)}.flash-comments .user-icon[data-v-101b3fee]{-webkit-box-flex:0;flex:0 80px;display:-webkit-box;display:flex;-webkit-box-pack:left;justify-content:left;margin:10px}.flash-comments .user-icon img[data-v-101b3fee]{height:45px}.flash-comments .comment-info[data-v-101b3fee]{-webkit-box-flex:5;flex:5}.flash-comments .comment-info .line[data-v-101b3fee]{display:-webkit-box;display:flex}.flash-comments .comment-info .name[data-v-101b3fee]{margin-top:20px;margin-left:-30px;color:#000;font-weight:700}.flash-comments .comment-info .email[data-v-101b3fee]{color:#aeaeae;margin-left:10px}.flash-comments .comment-info .text[data-v-101b3fee]{margin-left:55px;padding:10px;font-size:16px}.flash-comments .comment[data-v-101b3fee]{animation:animationFrames-data-v-101b3fee 1s ease;animation-iteration-count:1;transform-origin:50% 50%;animation-fill-mode:forwards;-webkit-animation:animationFrames-data-v-101b3fee 1s ease;-webkit-animation-iteration-count:1;-webkit-transform-origin:50% 50%;-webkit-animation-fill-mode:forwards;-moz-animation:animationFrames-data-v-101b3fee ease 1s;-moz-animation-iteration-count:1;-moz-transform-origin:50% 50%;-moz-animation-fill-mode:forwards;-o-animation:animationFrames-data-v-101b3fee ease 1s;-o-animation-iteration-count:1;-o-transform-origin:50% 50%;-o-animation-fill-mode:forwards;-ms-animation:animationFrames-data-v-101b3fee ease 1s;-ms-animation-iteration-count:1;-ms-transform-origin:50% 50%;-ms-animation-fill-mode:forwards}@keyframes animationFrames-data-v-101b3fee{0%{opacity:0;-webkit-transform:translate(-1500px);transform:translate(-1500px)}60%{opacity:1;-webkit-transform:translate(30px);transform:translate(30px)}80%{-webkit-transform:translate(-10px);transform:translate(-10px)}to{opacity:1;-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes animationFrames-data-v-101b3fee{0%{opacity:0;-webkit-transform:translate(-1500px)}60%{opacity:1;-webkit-transform:translate(30px)}80%{-webkit-transform:translate(-10px)}to{opacity:1;-webkit-transform:translate(0)}}.leftcolumn[data-v-101b3fee]{float:left;width:75%}.rightcolumn[data-v-101b3fee]{float:left;width:25%;padding-left:20px}.fakeimg[data-v-101b3fee]{background-color:#aaa;width:100%;padding:20px}.itemCard[data-v-101b3fee]{background-color:#fff;padding:25px;margin-top:20px}.row[data-v-101b3fee]:after{content:"";display:table;clear:both}@media screen and (max-width:1000px){.leftcolumn[data-v-101b3fee],.rightcolumn[data-v-101b3fee]{width:100%;padding:0}.flash-comments[data-v-101b3fee]{border:1px solid #aeaeae;border-radius:10px;width:80%;overflow:hidden}}@media screen and (max-width:500px){.flash-comments[data-v-101b3fee]{border:1px solid #aeaeae;border-radius:10px;width:100%;overflow:hidden}}.uploadFileInput[data-v-101b3fee]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}',""])},226:function(t,e,o){"use strict";o.r(e);o(77),o(39),o(29),o(59);var r=o(50),n=(o(13),o(61),o(57)),l=o.n(n),d=o(28);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(source,!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={head:{meta:[],link:[{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Raleway:200"},{rel:"stylesheet",href:"https://unpkg.com/purecss@0.6.2/build/pure-min.css",integrity:"sha384-UQiGfs9ICog+LwheBSRCt1o5cbyKIHbwjWscjemyBMT9YCUMZffs6UqUTd0hObXD",crossorigin:"anonymous"}],script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"}]},data:function(){return{cbctDownloadProgress:0,stlDownloadProgress:0,imageDownloadProgress:0,itemId:this.$route.params.showItem,profileImg:"",postImg:"",post:{},updatedPost:{},publisher:{},relativePosts:[],comment:"",comments:[],loadingPost:!1,uploadDialog:!1,saveUpdate:!1,file:"",editedIndex:-1,editedItem:{},editCommentDialog:!1,currentWorkflow:"TODO",materialItems:["ZIRCONIA","PMF","VENEER","TEMP","DENTURE","VETALIUM","ORTHO"]}},computed:{role:function(){return this.$store.getters.role}},methods:{errorOnProfileImage:function(){var t=localStorage.getItem("picture");this.profileImg=t||"https://s3.eu-central-1.amazonaws.com/q-communicator/default_images/avatar.svg"},goToAnotherPost:function(t){this.$router.replace("/uploadedItems/"+t)},downloadFiles:function(){var t="https://s3.eu-central-1.amazonaws.com/q-communicator/"+this.publisher.id+"/items/"+this.post.id+"/cbct/cbctFile.cbct",e="https://s3.eu-central-1.amazonaws.com/q-communicator/"+this.publisher.id+"/items/"+this.post.id+"/stl/stlFile.stl",o=this;0===o.cbctDownloadProgress&&l()({url:t,method:"GET",responseType:"blob",onDownloadProgress:function(progress){o.cbctDownloadProgress=Math.ceil(progress.loaded/progress.total*100)}}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download","cbctFile.rar"),document.body.appendChild(o),o.click()})).catch((function(){return alert("There is no CBCT file for this post")})).finally((function(){o.cbctDownloadProgress=0})),0===o.stlDownloadProgress&&l()({url:e,method:"GET",responseType:"blob",onDownloadProgress:function(progress){o.stlDownloadProgress=Math.ceil(progress.loaded/progress.total*100)}}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download","stlFile.stl"),document.body.appendChild(o),o.click()})).catch((function(){return alert("There is no STL file for this post")})).finally((function(){o.stlDownloadProgress=0}))},addComment:function(){var t=this,e=this.comment;if(this.comment="",""!==e){var o=this.$store.getters.userId;d.a.post("comments/",{item_id:this.itemId,text:e}).then((function(e){console.log(e.data);var r=e.data;r.created||(r.created=(new Date).toISOString()),r.src="https://s3.eu-central-1.amazonaws.com/q-communicator/"+o+"/avatar/picture.jpg",t.comments.push(r),setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),100)})).catch((function(){t.comment=e,alert("Failed to add the comment please try again later")}))}},deletePost:function(){var t=this;confirm("Are you sure you want to delete this post?")&&(console.log("Delete post"),d.a.delete("items/"+this.itemId).then((function(){t.$router.replace("/uploadedItems")})).catch((function(){alert("Failed to delete the post please try again later")})))},updatePost:function(){var t=this;if(this.areEquivalent(this.updatedPost,this.post))alert("Please make changes to update");else{if(new Date>new Date(this.updatedPost.due_date))return alert("Due date should be at least after this moment"),void(this.updatedPost=m({},this.post));this.saveUpdate=!0;var e="items/";"SURGICAL_PLANNING"===this.post.type?e+="surg_plan/":"DESIGNING"===this.post.type||"PRODUCTION"===this.post.type||"MILLING"===this.post.type||"MOCKUP_DIGITAL"===this.post.type?e+="des_prod_mil/":e+="student/",d.a.put(e+this.itemId,this.updatedPost).then((function(){t.post=m({},t.updatedPost),t.uploadDialog=!1})).catch((function(){t.updatedPost=m({},t.post),alert("Failed to update the post please try again later")})).finally((function(){t.saveUpdate=!1}))}},areEquivalent:function(a,b){var t=Object.getOwnPropertyNames(a),e=Object.getOwnPropertyNames(b);if(t.length!=e.length)return!1;for(var i=0;i<t.length-1;i++){var o=t[i];if(a[o]!==b[o])return!1}return!0},uploadClicked:function(){$("#file-input").trigger("click")},changeWorkflow:function(){d.a.put("").then((function(t){}))}},created:function(){var t=this,e=localStorage.getItem("token");d.a.defaults.headers.common.Authorization="Bearer "+e,this.loadingPost=!0,d.a.get("items/"+this.itemId).then((function(e){t.post=e.data.item,t.updatedPost=m({},t.post),t.post.created||(t.post.created=(new Date).toISOString()),t.publisher=e.data.user,t.postImg="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.publisher.id+"/items/"+t.post.id+"/picture/picture.jpg",t.comments=e.data.comments.map((function(t){return t.created||(t.created=(new Date).toISOString()),t.src="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.user.id+"/avatar/picture.jpg",t})),t.profileImg="https://s3.eu-central-1.amazonaws.com/q-communicator/"+t.publisher.id+"/avatar/picture.jpg",t.relativePosts=e.data.relative_items})).catch((function(t){})).finally((function(){t.loadingPost=!1}))}},v=(o(214),o(9)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.uploadDialog=!1,t.updatedPost=t.post}}},[o("v-icon",[t._v("close")])],1),t._v(" "),o("v-toolbar-title",[t._v("Update Post")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-toolbar-items",["ADMIN"===t.role||"PROFESSOR"===t.role?o("v-btn",{attrs:{dark:"",flat:"",disabled:t.saveUpdate},on:{click:t.updatePost}},[t._v("Save")]):t._e()],1)],1),t._v(" "),o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("h3",[t._v("Post Details")]),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},t._l(t.updatedPost,(function(e,r){return o("v-flex",{key:r,attrs:{xs12:"",sm6:""}},["material"!==r&&"description"!==r&&"patient_gender"!==r&&"shape"!==r&&"side"!==r&&"partial_box"!==r?o("v-text-field",{attrs:{label:r.charAt(0).toUpperCase()+r.slice(1),disabled:"id"===r||"type"===r||"created"===r||"professor_id"===r},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"shape"===r?o("v-text-field",{attrs:{label:t.Shade},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"material"===r?o("v-select",{attrs:{items:t.materialItems,label:"Material"},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"patient_gender"===r?o("v-select",{attrs:{items:["MALE","FEMALE"],label:"Patient gender"},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"side"===r?o("v-select",{attrs:{items:["UPPER_LOWER","UPPER","LOWER"],label:"Side"},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"partial_box"===r?o("v-select",{attrs:{items:["PARTIAL","FULL"],label:"Partial box"},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e(),t._v(" "),"description"===r?o("v-textarea",{attrs:{label:"Description",rows:1},model:{value:t.updatedPost[r],callback:function(e){t.$set(t.updatedPost,r,e)},expression:"updatedPost[name]"}}):t._e()],1)})),1),t._v(" "),o("v-layout",{attrs:{row:"",wrap:""}})],1)],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editCommentDialog,callback:function(e){t.editCommentDialog=e},expression:"editCommentDialog"}}),t._v(" "),t.post.title?o("body",[o("div",{staticClass:"row"},[o("div",{staticClass:"leftcolumn"},[o("div",{staticClass:"itemCard"},[o("section",[o("v-btn",{attrs:{dark:"",color:"#1976D2"},on:{click:function(e){t.uploadDialog=!0}}},[t._v("View post details")]),t._v(" "),"ADMIN"===t.role?o("v-btn",{attrs:{color:"error"},on:{click:t.deletePost}},[t._v("Delete post")]):t._e(),t._v(" "),o("div",{staticClass:"post"},[o("h2",[t._v(t._s(t.post.title))]),t._v(" "),o("h5",[t._v(t._s(t.post.created.split("T")[0])+" "+t._s(t.post.created.split("T")[1]))]),t._v(" "),""!==t.postImg&&"none"!==t.postImg?o("img",{staticClass:"fakeimg",staticStyle:{width:"300px",padding:"0"},attrs:{src:t.postImg},on:{error:function(e){t.postImg="none"}}}):t._e(),t._v(" "),"none"===t.postImg?o("div",{staticClass:"fakeimg",staticStyle:{height:"200px"}},[t._v("This post has no image, click on the button below to download content files")]):t._e(),t._v(" "),o("h6",[t._v(t._s(t.post.description))])]),t._v(" "),t.cbctDownloadProgress||t.stlDownloadProgress?t._e():o("v-btn",{attrs:{color:"primary"},on:{click:t.downloadFiles}},[t._v("Download Files")]),t._v(" "),t.cbctDownloadProgress?o("v-progress-circular",{attrs:{rotate:360,size:130,width:15,value:t.cbctDownloadProgress,color:"teal"}},[t._v("CBCT: "+t._s(t.cbctDownloadProgress)+"%")]):t._e(),t._v(" "),t.stlDownloadProgress?o("v-progress-circular",{attrs:{rotate:360,size:130,width:15,value:t.stlDownloadProgress,color:"primary"}},[t._v("STL: "+t._s(t.stlDownloadProgress)+"%")]):t._e()],1),t._v(" "),o("section",[o("div",{staticClass:"flash-comments"},[t._m(0),t._v(" "),o("form",{staticClass:"pure-form",attrs:{id:"comment-form"},on:{submit:function(e){return e.preventDefault(),t.addComment(e)}}},[o("div",{staticClass:"comment-form"},[o("div",{staticClass:"left-side"},[o("div",{staticClass:"row"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"Enter comment text",required:"",id:"new_comment_text",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"right-side"},[o("button",{staticClass:"button-secondary pure-button",attrs:{type:"submit",disabled:!t.comment}},[t._v("Add Comment")])])])]),t._v(" "),o("div",{staticClass:"comments-list",attrs:{id:"comments-list"}},t._l(t.comments,(function(e,i){return o("div",{key:i,staticClass:"comment-info comment"},[o("div",{staticClass:"line"},[o("div",{staticClass:"user-icon"},[o("img",{attrs:{src:e.src},on:{error:function(t){e.src="https://s3.eu-central-1.amazonaws.com/q-communicator/default_images/avatar.svg"}}})]),t._v(" "),o("div",{staticClass:"name"},[t._v(t._s(e.user.first_name)+" "+t._s(e.user.last_name))]),t._v(" "),o("v-spacer"),t._v(" "),o("span",{staticClass:"caption grey--text",staticStyle:{"text-align":"right"}},[t._v(t._s(e.created.split("T")[0])+" "+t._s(e.created.split("T")[1]))])],1),t._v(" "),o("div",{staticClass:"line"},[o("div",{staticClass:"text"},[t._v(t._s(e.text))])])])})),0)])])])]),t._v(" "),o("div",{staticClass:"rightcolumn"},[o("div",{staticClass:"itemCard"},[o("h2",[t._v("About The Publisher")]),t._v(" "),o("img",{staticClass:"fakeimg",staticStyle:{height:"200px",padding:"0"},attrs:{src:t.profileImg},on:{error:t.errorOnProfileImage}}),t._v(" "),o("h6",[o("b",[t._v("Name:")]),t._v("\n            "+t._s(t.publisher.first_name)+" "+t._s(t.publisher.last_name)+"\n          ")]),t._v(" "),o("h6",[o("b",[t._v("Email:")]),t._v("\n            "+t._s(t.publisher.email)+"\n          ")]),t._v(" "),o("h6",[o("b",[t._v("Profession:")]),t._v("\n            "+t._s(t.publisher.profession)+"\n          ")])]),t._v(" "),o("div",{staticClass:"itemCard"},[o("h3",[t._v("Relative Posts")]),t._v(" "),t._l(t.relativePosts,(function(e){return o("div",{key:e.id},[o("div",{staticClass:"fakeimg",staticStyle:{cursor:"pointer"},on:{click:function(o){return t.goToAnotherPost(e.id)}}},[t._v(t._s(e.title))]),t._v(" "),o("br")])}))],2)])])]):t._e(),t._v(" "),t.loadingPost?o("v-container",[o("v-text-field",{attrs:{color:"primary",loading:"",disabled:""}})],1):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",[e("img",{attrs:{src:"https://cdn1.iconfinder.com/data/icons/basic-ui-elements-coloricon/21/43-512.png",width:"40",height:"40"}})]),this._v(" "),e("div",{staticClass:"text"},[this._v("Comments")])])}],!1,null,"101b3fee",null);e.default=component.exports}}]);